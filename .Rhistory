pm <- pmGen(passFailA)
return(pm)
}
pm   <- panelURPassFail(pPanel,F)
# Graphs
gr       <- graph.adjacency(pm,"undirected",diag = F)
# Maximal Clubs
clubs <- lapply(maximal.cliques(gr), function(c) cnames[c])
ord   <- order(sapply(clubs,length),decreasing = T)
clubs <- matrix(sapply(clubs[ord], function(c) paste0(c,collapse = " - ")),,1)
write.csv(clubs, file = paste0("Results/",yearOrRegion,"MCL.csv"))
# Counts
lcl    <- largest.cliques(gr)
nlcl   <- if(class(lcl)=="list"){length(lcl[[1]])} else {length(lcl)}
counts <- sapply(2:nlcl, function(n)  sum(sapply(maximal.cliques(gr), length) == n))
# Membership Counts
clubs     <- maximal.cliques(gr)
clubs     <- clubs[sapply(clubs, length) > 1]
overlaps  <- sapply(1:length(cnames), function(c) sum(sapply(clubs, function(cl) sum(c ==cl))))
overlaps  <- cbind(cnames, overlaps)
overlaps  <- overlaps[order(overlaps[,1]),]
return(list(counts,overlaps))
}
sapply(  function(yearOrRegion){if(is.numeric(yearOrRegion)){year      <- yearOrRegion
filename  <- paste0("Application/madisonFrom-",year,".csv")
z         <- read.table(filename,header = T,sep = ";")
z         <- data.matrix(z)} else if(yearOrRegion=="Maddison"){
filename  <- "Application/madisonFromMaxNA2-1950.csv"
z         <- read.table(filename,header = T,sep = " ")
z         <- data.matrix(z)
} else if(yearOrRegion=="Penn"){
z         <- read.csv("Application/penn.csv")
z         <- data.matrix(z)} else if(yearOrRegion == "Europe"){
z <- data.matrix(read.table("Application/mds_Europe-1950.csv",header = T,sep = ";"))} else {
fname1 <- paste0("Application/mds_G7-1950.csv"); fname2 <- paste0("Application/mds_Europe-1950.csv"); fname3 <- paste0("Application/mds_S&P-1950.csv")
z_g7         <- read.table(fname1,header = T,sep = ";"); z_g7 <- data.matrix(z_g7)
z_eu         <- read.table(fname2,header = T,sep = ";"); z_eu <- data.matrix(z_eu)
z_sp         <- read.table(fname3,header = T,sep = ";"); z_sp <- data.matrix(z_sp)
if(yearOrRegion=="Europe+G7"|yearOrRegion=="G7+Europe")
{z<- matrix(c(z_g7,z_eu),dim(z_g7)[1],); colnames(z)<- c(colnames(z_g7),colnames(z_eu))} else
if(yearOrRegion=="Europe+S&P"|yearOrRegion=="S&P+Europe")
{z<- matrix(c(z_eu,z_sp),dim(z_eu)[1],); colnames(z)<- c(colnames(z_eu),colnames(z_sp))} else
if(yearOrRegion=="G7+S&P"|yearOrRegion=="S&P+G7")
{z<- matrix(c(z_g7,z_sp),dim(z_g7)[1],); colnames(z)<- c(colnames(z_g7),colnames(z_sp))} else {stop("Unknown Country List")}
if(sum(duplicated(t(z)))!=0){z<- z[,-which(duplicated(t(z)))]};dim(z)
})
sapply(  function(yearOrRegion){if(is.numeric(yearOrRegion)){year      <- yearOrRegion
filename  <- paste0("Application/madisonFrom-",year,".csv")
z         <- read.table(filename,header = T,sep = ";")
z         <- data.matrix(z)} else if(yearOrRegion=="Maddison"){
filename  <- "Application/madisonFromMaxNA2-1950.csv"
z         <- read.table(filename,header = T,sep = " ")
z         <- data.matrix(z)
} else if(yearOrRegion=="Penn"){
z         <- read.csv("Application/penn.csv")
z         <- data.matrix(z)} else if(yearOrRegion == "Europe"){
z <- data.matrix(read.table("Application/mds_Europe-1950.csv",header = T,sep = ";"))} else {
fname1 <- paste0("Application/mds_G7-1950.csv"); fname2 <- paste0("Application/mds_Europe-1950.csv"); fname3 <- paste0("Application/mds_S&P-1950.csv")
z_g7         <- read.table(fname1,header = T,sep = ";"); z_g7 <- data.matrix(z_g7)
z_eu         <- read.table(fname2,header = T,sep = ";"); z_eu <- data.matrix(z_eu)
z_sp         <- read.table(fname3,header = T,sep = ";"); z_sp <- data.matrix(z_sp)
if(yearOrRegion=="Europe+G7"|yearOrRegion=="G7+Europe")
{z<- matrix(c(z_g7,z_eu),dim(z_g7)[1],); colnames(z)<- c(colnames(z_g7),colnames(z_eu))} else
if(yearOrRegion=="Europe+S&P"|yearOrRegion=="S&P+Europe")
{z<- matrix(c(z_eu,z_sp),dim(z_eu)[1],); colnames(z)<- c(colnames(z_eu),colnames(z_sp))} else
if(yearOrRegion=="G7+S&P"|yearOrRegion=="S&P+G7")
{z<- matrix(c(z_g7,z_sp),dim(z_g7)[1],); colnames(z)<- c(colnames(z_g7),colnames(z_sp))} else {stop("Unknown Country List")}
if(sum(duplicated(t(z)))!=0){z<- z[,-which(duplicated(t(z)))]}
};dim(z))
source('~/.active-rstudio-document')
lapply(c("Maddison","Penn","Europe","Europe+G7","Europe+S&P","G7+S&P"), temp)
sapply(c("Maddison","Penn","Europe","Europe+G7","Europe+S&P","G7+S&P"), temp)
sapply(c(1930,1940), temp)
yearOrRegion <- 1930
if(is.numeric(yearOrRegion)){year      <- yearOrRegion
filename  <- paste0("Application/madisonFrom-",year,".csv")
z         <- read.table(filename,header = T,sep = ";")
z         <- data.matrix(z)} else if(yearOrRegion=="Maddison"){
filename  <- "Application/madisonFromMaxNA2-1950.csv"
z         <- read.table(filename,header = T,sep = " ")
z         <- data.matrix(z)
} else if(yearOrRegion=="Penn"){
z         <- read.csv("Application/penn.csv")
z         <- data.matrix(z)} else if(yearOrRegion == "Europe"){
z <- data.matrix(read.table("Application/mds_Europe-1950.csv",header = T,sep = ";"))} else {
fname1 <- paste0("Application/mds_G7-1950.csv"); fname2 <- paste0("Application/mds_Europe-1950.csv"); fname3 <- paste0("Application/mds_S&P-1950.csv")
z_g7         <- read.table(fname1,header = T,sep = ";"); z_g7 <- data.matrix(z_g7)
z_eu         <- read.table(fname2,header = T,sep = ";"); z_eu <- data.matrix(z_eu)
z_sp         <- read.table(fname3,header = T,sep = ";"); z_sp <- data.matrix(z_sp)
if(yearOrRegion=="Europe+G7"|yearOrRegion=="G7+Europe")
{z<- matrix(c(z_g7,z_eu),dim(z_g7)[1],); colnames(z)<- c(colnames(z_g7),colnames(z_eu))} else
if(yearOrRegion=="Europe+S&P"|yearOrRegion=="S&P+Europe")
{z<- matrix(c(z_eu,z_sp),dim(z_eu)[1],); colnames(z)<- c(colnames(z_eu),colnames(z_sp))} else
if(yearOrRegion=="G7+S&P"|yearOrRegion=="S&P+G7")
{z<- matrix(c(z_g7,z_sp),dim(z_g7)[1],); colnames(z)<- c(colnames(z_g7),colnames(z_sp))} else {stop("Unknown Country List")}
if(sum(duplicated(t(z)))!=0){z<- z[,-which(duplicated(t(z)))]}
}
colnames(z)
paste0(colnames(z),collapse=", ")
yearOrRegion <- "Penn"
if(is.numeric(yearOrRegion)){year      <- yearOrRegion
filename  <- paste0("Application/madisonFrom-",year,".csv")
z         <- read.table(filename,header = T,sep = ";")
z         <- data.matrix(z)} else if(yearOrRegion=="Maddison"){
filename  <- "Application/madisonFromMaxNA2-1950.csv"
z         <- read.table(filename,header = T,sep = " ")
z         <- data.matrix(z)
} else if(yearOrRegion=="Penn"){
z         <- read.csv("Application/penn.csv")
z         <- data.matrix(z)} else if(yearOrRegion == "Europe"){
z <- data.matrix(read.table("Application/mds_Europe-1950.csv",header = T,sep = ";"))} else {
fname1 <- paste0("Application/mds_G7-1950.csv"); fname2 <- paste0("Application/mds_Europe-1950.csv"); fname3 <- paste0("Application/mds_S&P-1950.csv")
z_g7         <- read.table(fname1,header = T,sep = ";"); z_g7 <- data.matrix(z_g7)
z_eu         <- read.table(fname2,header = T,sep = ";"); z_eu <- data.matrix(z_eu)
z_sp         <- read.table(fname3,header = T,sep = ";"); z_sp <- data.matrix(z_sp)
if(yearOrRegion=="Europe+G7"|yearOrRegion=="G7+Europe")
{z<- matrix(c(z_g7,z_eu),dim(z_g7)[1],); colnames(z)<- c(colnames(z_g7),colnames(z_eu))} else
if(yearOrRegion=="Europe+S&P"|yearOrRegion=="S&P+Europe")
{z<- matrix(c(z_eu,z_sp),dim(z_eu)[1],); colnames(z)<- c(colnames(z_eu),colnames(z_sp))} else
if(yearOrRegion=="G7+S&P"|yearOrRegion=="S&P+G7")
{z<- matrix(c(z_g7,z_sp),dim(z_g7)[1],); colnames(z)<- c(colnames(z_g7),colnames(z_sp))} else {stop("Unknown Country List")}
if(sum(duplicated(t(z)))!=0){z<- z[,-which(duplicated(t(z)))]}
}
paste0(colnames(z),collapse=", ")
yearOrRegion <- "Maddison"
if(is.numeric(yearOrRegion)){year      <- yearOrRegion
filename  <- paste0("Application/madisonFrom-",year,".csv")
z         <- read.table(filename,header = T,sep = ";")
z         <- data.matrix(z)} else if(yearOrRegion=="Maddison"){
filename  <- "Application/madisonFromMaxNA2-1950.csv"
z         <- read.table(filename,header = T,sep = " ")
z         <- data.matrix(z)
} else if(yearOrRegion=="Penn"){
z         <- read.csv("Application/penn.csv")
z         <- data.matrix(z)} else if(yearOrRegion == "Europe"){
z <- data.matrix(read.table("Application/mds_Europe-1950.csv",header = T,sep = ";"))} else {
fname1 <- paste0("Application/mds_G7-1950.csv"); fname2 <- paste0("Application/mds_Europe-1950.csv"); fname3 <- paste0("Application/mds_S&P-1950.csv")
z_g7         <- read.table(fname1,header = T,sep = ";"); z_g7 <- data.matrix(z_g7)
z_eu         <- read.table(fname2,header = T,sep = ";"); z_eu <- data.matrix(z_eu)
z_sp         <- read.table(fname3,header = T,sep = ";"); z_sp <- data.matrix(z_sp)
if(yearOrRegion=="Europe+G7"|yearOrRegion=="G7+Europe")
{z<- matrix(c(z_g7,z_eu),dim(z_g7)[1],); colnames(z)<- c(colnames(z_g7),colnames(z_eu))} else
if(yearOrRegion=="Europe+S&P"|yearOrRegion=="S&P+Europe")
{z<- matrix(c(z_eu,z_sp),dim(z_eu)[1],); colnames(z)<- c(colnames(z_eu),colnames(z_sp))} else
if(yearOrRegion=="G7+S&P"|yearOrRegion=="S&P+G7")
{z<- matrix(c(z_g7,z_sp),dim(z_g7)[1],); colnames(z)<- c(colnames(z_g7),colnames(z_sp))} else {stop("Unknown Country List")}
if(sum(duplicated(t(z)))!=0){z<- z[,-which(duplicated(t(z)))]}
}
paste0(colnames(z),collapse=", ")
dataGenplus(50,10,2,0.2,numofrep,F)
dataGenplus(75,10,2,0.2,numofrep,F)
dataGenplus(100,10,2,0.2,numofrep,F)
dataGenplus(200,10,2,0.2,numofrep,F)
dataGenplus(50,10,2,0.6,numofrep,F)
dataGenplus(75,10,2,0.6,numofrep,F)
dataGenplus(100,10,2,0.6,numofrep,F)
dataGenplus(200,10,2,0.6,numofrep,F)
dataGenplus(50,10,3,0.2,numofrep,F)
dataGenplus(75,10,3,0.2,numofrep,F)
dataGenplus(100,10,3,0.2,numofrep,F)
dataGenplus(200,10,3,0.2,numofrep,F)
dataGenplus(50,10,3,0.6,numofrep,F)
dataGenplus(75,10,3,0.6,numofrep,F)
dataGenplus(100,10,3,0.6,numofrep,F)
dataGenplus(200,10,3,0.6,numofrep,F)
source('~/MCStudy_1000/mcHFplus.R')
mcHFplus(50,10,2,0.2,T,F)
mcHFplus(75,10,2,0.2,T,F)
mcHFplus(100,10,2,0.2,T,F)
mcHFplus(200,10,2,0.2,T,F)
mcHFplus(50,10,2,0.6,T,F)
mcHFplus(75,10,2,0.6,T,F)
mcHFplus(100,10,2,0.6,T,F)
mcHFplus(200,10,2,0.6,T,F)
mcHFplus(50,10,3,0.2,T,F)
mcHFplus(75,10,3,0.2,T,F)
mcHFplus(100,10,3,0.2,T,F)
mcHFplus(200,10,3,0.2,T,F)
mcHFplus(50,10,3,0.6,T,F)
mcHFplus(75,10,3,0.6,T,F)
mcHFplus(100,10,3,0.6,T,F)
mcHFplus(200,10,3,0.6,T,F)
setwd("~/MCStudy_1000/")
mcHFplus(50,10,2,0.2,T,F)
mcHFplus(75,10,2,0.2,T,F)
mcHFplus(100,10,2,0.2,T,F)
mcHFplus(200,10,2,0.2,T,F)
mcHFplus(50,10,2,0.6,T,F)
mcHFplus(75,10,2,0.6,T,F)
mcHFplus(100,10,2,0.6,T,F)
mcHFplus(200,10,2,0.6,T,F)
mcHFplus(50,10,3,0.2,T,F)
mcHFplus(75,10,3,0.2,T,F)
mcHFplus(100,10,3,0.2,T,F)
mcHFplus(200,10,3,0.2,T,F)
mcHFplus(50,10,3,0.6,T,F)
mcHFplus(75,10,3,0.6,T,F)
mcHFplus(100,10,3,0.6,T,F)
mcHFplus(200,10,3,0.6,T,F)
mcHFplus(50,10,2,0.2,F,F)
mcHFplus(75,10,2,0.2,F,F)
mcHFplus(100,10,2,0.2,F,F)
mcHFplus(200,10,2,0.2,F,F)
mcHFplus(50,10,2,0.6,F,F)
mcHFplus(75,10,2,0.6,F,F)
mcHFplus(100,10,2,0.6,F,F)
mcHFplus(200,10,2,0.6,F,F)
mcHFplus(50,10,3,0.2,F,F)
mcHFplus(75,10,3,0.2,F,F)
mcHFplus(100,10,3,0.2,F,F)
mcHFplus(200,10,3,0.2,F,F)
mcHFplus(50,10,3,0.6,F,F)
mcHFplus(75,10,3,0.6,F,F)
mcHFplus(100,10,3,0.6,F,F)
mcHFplus(200,10,3,0.6,F,F)
dir("../MCStudy_10000/Output/noCons/multiClub/",recursive = T)
noconsres <- dir("../MCStudy_10000/Output/noCons/multiClub/",recursive = T)
wiconsres <- dir("../MCStudy_10000/Output/withCons/multiClub/",recursive = T)
wiconsres
noconsres <- noconsres[grepl("HF",noconsres) & grepl("pois",noconsres)]
noconsres
wiconsres <- wiconsres[grepl("HF",wiconsres) & grepl("pois",wiconsres)]
wiconsres
dir.create("Output/trimmed")
noconsres <- dir("../MCStudy_10000/Output/noCons/multiClub/",recursive = T)
wiconsres <- dir("../MCStudy_10000/Output/withCons/multiClub/",recursive = T)
noconsres <- noconsres[grepl("reportHF",noconsres) & grepl("pois",noconsres)]
wiconsres <- wiconsres[grepl("reportHF",wiconsres) & grepl("pois",wiconsres)]
noconsres
noconsres <- lapply(noconsres, function(s) get(load(paste0("../MCStudy_10000/Output/noCons/multiClub/",s))))
noconsres
wiconsres <- lapply(wiconsres, function(s) get(load(paste0("../MCStudy_10000/Output/withCons/multiClub/",s))))
wiconsres
dim(wiconsres)
dim(wiconsres[[1]])
noconsres <- lapply(noconsres, function(r) r[3000,])
wiconsres <- lapply(wiconsres, function(r) r[3000,])
wiconsres
noconsres <- dir("../MCStudy_10000/Output/noCons/multiClub/",recursive = T)
wiconsres <- dir("../MCStudy_10000/Output/withCons/multiClub/",recursive = T)
noconsres <- noconsres[grepl("reportHF",noconsres) & grepl("pois",noconsres)]
wiconsres <- wiconsres[grepl("reportHF",wiconsres) & grepl("pois",wiconsres)]
noconsres <- lapply(noconsres, function(s) get(load(paste0("../MCStudy_10000/Output/noCons/multiClub/",s))))
wiconsres <- lapply(wiconsres, function(s) get(load(paste0("../MCStudy_10000/Output/withCons/multiClub/",s))))
noconsres <- lapply(noconsres, function(r) r[1:3000,])
wiconsres <- lapply(wiconsres, function(r) r[1:3000,])
noconsres
noconsdir <- dir("../MCStudy_10000/Output/noCons/multiClub/",recursive = T)
wiconsdir <- dir("../MCStudy_10000/Output/withCons/multiClub/",recursive = T)
noconsdir <- noconsdir[grepl("reportHF",noconsdir) & grepl("pois",noconsdir)]
wiconsdir <- wiconsdir[grepl("reportHF",wiconsdir) & grepl("pois",wiconsdir)]
noconsdir <- dir("../MCStudy_10000/Output/noCons/multiClub/",recursive = T)
wiconsdir <- dir("../MCStudy_10000/Output/withCons/multiClub/",recursive = T)
noconsdir <- noconsdir[grepl("reportHF",noconsdir) & grepl("pois",noconsdir)]
wiconsdir <- wiconsdir[grepl("reportHF",wiconsdir) & grepl("pois",wiconsdir)]
noconsres <- lapply(noconsdir, function(s) get(load(paste0("../MCStudy_10000/Output/noCons/multiClub/",s))))
wiconsres <- lapply(wiconsdir, function(s) get(load(paste0("../MCStudy_10000/Output/withCons/multiClub/",s))))
noconsres <- lapply(noconsres, function(r) r[1:3000,])
wiconsres <- lapply(wiconsres, function(r) r[1:3000,])
lapply(1:length(noconsdir), function(i) save(noconsres, file=paste0("Output/trimmed/",noconsdir[i])))
lapply(1:length(noconsdir), function(i) save(noconsres[i], file=paste0("Output/trimmed/",noconsdir[i])))
lapply(1:length(noconsdir), function(i) save(noconsres[[i]], file=paste0("Output/trimmed/",noconsdir[i])))
oconsres
noconsdir <- dir("../MCStudy_10000/Output/noCons/multiClub/",recursive = T)
wiconsdir <- dir("../MCStudy_10000/Output/withCons/multiClub/",recursive = T)
noconsdir <- noconsdir[grepl("reportHF",noconsdir) & grepl("pois",noconsdir)]
wiconsdir <- wiconsdir[grepl("reportHF",wiconsdir) & grepl("pois",wiconsdir)]
noconsres <- lapply(noconsdir, function(s) get(load(paste0("../MCStudy_10000/Output/noCons/multiClub/",s))))
wiconsres <- lapply(wiconsdir, function(s) get(load(paste0("../MCStudy_10000/Output/withCons/multiClub/",s))))
noconsres <- lapply(noconsres, function(r) r[1:3000,])
wiconsres <- lapply(wiconsres, function(r) r[1:3000,])
lapply(1:length(noconsdir), function(i) save(noconsres[[i]], file=paste0("Output/trimmed/",noconsdir[i])))
for(i in 1:length(noconsdir)){save(noconsres[[i]], file=paste0("Output/trimmed/",noconsdir[i])))}
for(i in 1:length(noconsdir)){save(noconsres[[i]], file=paste0("Output/trimmed/",noconsdir[i]))}
for(i in 1:length(noconsdir)){ res <-  noconsres[[i]]; save(res, file=paste0("Output/trimmed/",noconsdir[i]))}
i<-1
res <-  noconsres[[i]]
res
fname <- paste0("Output/trimmed/",noconsdir[i]))
fname <- paste0("Output/trimmed/",noconsdir[i])
fname
fdir  <- gsub("reportHF.*","",fname)
fdir
resdir <- dir("../MCStudy_10000/Output",recursive = T)
resdir
noconsdir <- noconsdir[grepl("multiClub",noconsdir) & grepl("reportHF",noconsdir) & grepl("pois",noconsdir)]
resdir <- noconsdir[grepl("multiClub",noconsdir) & grepl("reportHF",noconsdir) & grepl("pois",noconsdir)]
resdir
resdir <- resdir[grepl("multiClub",resdir) & grepl("reportHF",resdir) & grepl("pois",resdir)]
resdir
resdir <- dir("../MCStudy_10000/Output",recursive = T)
resdir
resdir <- resdir[grepl("multiClub",resdir)]
resdir
resdir <- dir("../MCStudy_10000/Output",recursive = T)
resdir <- resdir[grepl("multiClub.*report.*pois",resdir)]
resdir
gmmldir <- gmmldir[grepl("multiClub.*gmml.*pois",gmmldir)]
repdir <- dir("../MCStudy_10000/Output",recursive = T)
repdir <- repdir[grepl("multiClub.*report.*pois",repdir)]
gmmldir <- dir("../MCStudy_10000/Output",recursive = T)
gmmldir <- gmmldir[grepl("multiClub.*gmml.*pois",gmmldir)]
gmmldir
repdir <- dir("../MCStudy_10000/Output",recursive = T)
repdir <- repdir[grepl("multiClub.*reportHF.*pois",repdir)]
gmmldir <- dir("../MCStudy_10000/Output",recursive = T)
gmmldir <- gmmldir[grepl("multiClub.*gmmlHF.*pois",gmmldir)]
gmmldir
repdir
reps <- lapply(repdir, function(s) get(load(paste0("../MCStudy_10000/Output/",s))))
reps
gmmls <- lapply(gmmldir, function(s) get(load(paste0("../MCStudy_10000/Output/",s))))
reps <- lapply(reps, function(r) r[1:3000,])
gmmls[[1]]
dim(gmmls[[1]])
reps  <- lapply(reps, function(r) r[1:3000,])
gmmls <- lapply(gmmls, function(g) g[1:6000,])
res <-  reps[[i]]
res
repdir[i]
fname <- paste0("Output/trimmed/",repdir[i])
fname
fdir  <- gsub("reportHF.*","",fname)
fdir
dir.create(fdir,recursive = T)
for(i in 1:length(repdir)){ res <-  reps[[i]]
fname <- paste0("Output/trimmed/",repdir[i])
fdir  <- gsub("reportHF.*","",fname)
dir.create(fdir,recursive = T)
save(res, file=paste0("Output/trimmed/",fname))}
for(i in 1:length(repdir)){ res <-  reps[[i]]
fname <- paste0("Output/trimmed/",repdir[i])
fdir  <- gsub("reportHF.*","",fname)
dir.create(fdir,recursive = T)
save(res, file=paste0(fname))}
warnings()
setwd("~/ArtificialIntelligence/")
files <- dir("./")
files
len <- length(files)
len
seq(1,len,5)
int2 <- c((int1-1)[-1],len)
int1 <- seq(1,len,5)
int2 <- c((int1-1)[-1],len)
int2
rm(int1,int2)
int1 <- seq(1,len,5)
int2 <- c((int1-1)[-1],len)
intv <- cbind(int1,int2)
rm(int1,int2)
intv
intv
temploc <- dir.create("temp")
finloc  <- dir.create("finished")
temploc
file.rename(files[1],paste0("temp/",files[1]))
lapply(intv[1,1]:intv[1:2], function(j) file.rename(files[j],paste0("temp/",files[j])))
intv[1,1]:intv[1:2]
intv[1,1]
intv[1:2]
lapply(intv[1,1]:intv[1,2], function(j) file.rename(files[j],paste0("temp/",files[j])))
setwd("..")
q()
setwd("~/TwoStateMS/")
source("convDLV.R")
source("utils.R")
source("dlvPath.R")
q()
load("~/twostateMD_old/twostate/results/d_1930_res1.rda")
res1
head(res1)
res1[[1]]$par
res1[[2]]$par
res1[[4]]$par
res1[[3]]$par
res1[[4]]$par
setwd("~/ReplciationFiles/")
setwd("~/TwoStateMS/")
source("convDLV.R")
source("plotAll.R")
source("plotRejs.R")
res1930 <- get(load("../twostateMD/results/d_1930_resALL.rda"))
res1930 <- totable(res1930)
source("convDLV.R")
source("utils.R")
source("dlvPath.R")
res1930 <- res1930[,-8]
res1930 <- get(load("../twostateMD/results/d_1930_resALL.rda"))
res1930 <- totable(res1930)
res1930 <- res1930[,-8]
res1930
pathss_1930  <- lapply(1:nrow(res1930), function(x) {cat(x,"\n");dlvPath_dm(res1930[x,-(8:9)],pdats1930)})
pdat1930 <- gen_pdat(1930)
pdat1930
pathss_1930  <- lapply(1:nrow(res1930), function(x) {cat(x,"\n");dlvPath_dm(res1930[x,-(8:9)],pdat1930)})
# Reading outputs
ress_d   <- lapply(dir("output","_D_.*resALL.rda"), function(d) get(load(paste0("output/",d))))
ress_dm  <- lapply(dir("output","_DM_.*resALL.rda"), function(d) get(load(paste0("output/",d))))
# Converting to tables
ress_dm <- lapply(ress_dm, totable)
ress_dm
# Reformating results
# ress_d  <- lapply(ress_d, correctRes)
ress_d  <- lapply(ress_d, function(r) correctRes(r[,1:7]))
ress_dm <- lapply(ress_dm, correctRes)
ress_dm
ress_d
ress_dm  <- lapply(dir("output","_DM_.*resALL.rda"), function(d) get(load(paste0("output/",d))))
# Converting to tables
ress_dm <- lapply(ress_dm, totable)
ress_dm
ress_dm <- lapply(ress_dm, function(r) r[,-7])
# Reformating results
# ress_d  <- lapply(ress_d, correctRes)
ress_d  <- lapply(ress_d, function(r) correctRes(r[,1:7]))
# Reading outputs
ress_d   <- lapply(dir("output","_D_.*resALL.rda"), function(d) get(load(paste0("output/",d))))
ress_dm  <- lapply(dir("output","_DM_.*resALL.rda"), function(d) get(load(paste0("output/",d))))
# Converting to tables
ress_dm <- lapply(ress_dm, totable)
ress_dm <- lapply(ress_dm, function(r) r[,-7])
# Reformating results
# ress_d  <- lapply(ress_d, correctRes)
ress_d  <- lapply(ress_d, function(r) correctRes(r[,1:7]))
ress_dm <- lapply(ress_dm, correctRes)
ress_dm
ress_d
# Reading outputs
ress_d   <- lapply(dir("output","_D_.*resALL.rda"), function(d) get(load(paste0("output/",d))))
# Reformating results
# ress_d  <- lapply(ress_d, correctRes)
ress_d  <- lapply(ress_d, function(r) correctRes(r[,1:7]))
# Reshaping tables into similar forms
correctRes <- function(res){
# Reformats the table of estimates for it to be in "dH,dL,PHH,PLL, ..." order
if(ncol(res) == 7){
res[res[,1]>res[,2],] <- res[res[,1]>res[,2],c(2,1,4,3,5:ncol(res))]
} else {
res[res[,1]>res[,2],] <- res[res[,1]>res[,2],c(2,1,4,3,5,7,6,8)]}
return(res)
}
# Reformating results
# ress_d  <- lapply(ress_d, correctRes)
ress_d  <- lapply(ress_d, function(r) correctRes(r[,1:7]))
ress_dm <- lapply(ress_dm, correctRes)
ress_d
ress_dm
# data names and pair panels
dnames     <- gsub("d_|_D_resALL.rda","",dir("output","_D_.*resALL.rda"))
pdats      <- lapply(dnames, gen_pdat)
# State switching series for dm and d
pathss_DM   <- lapply(1:length(ress_dm), function(i) lapply(1:nrow(ress_dm[[i]]), function(x) {cat(x,"\n");dlvPath_dm(ress_dm[[i]][x,-8],pdats[[i]][,x])}))
dlvPath_dm
source('~/twostateMD/dlvPath.R')
res1930
pathss_1930  <- lapply(1:nrow(res1930), function(x) {cat(x,"\n");dlvPath(res1930[x,1:7],pdats[[1]])})
ress_dm[[1]]
res1930
head(res1930)
head(ress_dm[[1]])
pathss_1930  <- lapply(2:nrow(res1930), function(x) {cat(x,"\n");dlvPath(res1930[x,1:7],pdats[[1]])})
pathss_1930  <- lapply(2:nrow(res1930), function(x) {cat(x,"\n");dlvPath(ress_dm[x,1:7],pdats[[1]])})
pathss_1930  <- lapply(2:nrow(res1930), function(x) {cat(x,"\n");dlvPath(ress_dm[[1]][x,1:7],pdats[[1]])})
pdats[[1]]
# State switching series for dm and d
pathss_DM   <- lapply(1:length(ress_dm), function(i) lapply(1:nrow(ress_dm[[i]]), function(x) {cat(x,"\n");dlvPath_dm(ress_dm[[i]][x,-8],pdats[[i]][,x])}))
pathss_1930  <- lapply(2:nrow(res1930), function(x) {cat(x,"\n");dlvPath(ress_dm[[1]][x,1:7],pdats[[1]][,x])})
pathss_1930  <- lapply(1:nrow(res1930), function(x) {cat(x,"\n");dlvPath(res1930[x,1:7],pdats[[1]][,x])})
pathss_1930
ischange  <- t(sapply(pathss_1930, function(p) {temp <- apply(p,1,sum) > 0; temp <- c(temp,temp,T,temp); return(temp)}))
ischange
res1930
pars1930  <- res1930[,-8] * ischange
pars1930
source('~/TwoStateMS/utils.R')
rep1930   <- report(pars1930)
rep1930
res1930  <- get(load("../twostateMD/results/d_1930_resALL.rda"))
res1930  <- totable(res1930)
res1930  <- res1930[,-8]
pdat1930 <- gen_pdat(1930)
pathss_1930  <- lapply(1:nrow(res1930), function(x) {cat(x,"\n");dlvPath_dm(res1930[x,1:7],pdats[[1]][,x])})
ischange  <- t(sapply(pathss_1930, function(p) {temp <- apply(p,1,sum) > 0; temp <- c(temp,temp,T,temp); return(temp)}))
pars1930  <- res1930[,-8] * ischange
rep1930
rep1930   <- report(pars1930)
rep1930
res1930  <- get(load("../twostateMD/results/d_1930_resALL.rda"))
res1930  <- totable(res1930)
res1930  <- res1930[,-8]
pdat1930 <- gen_pdat(1930)
pathss_1930  <- lapply(1:nrow(res1930), function(x) {cat(x,"\n");dlvPath(res1930[x,1:7],pdats[[1]][,x])})
ischange  <- t(sapply(pathss_1930, function(p) {temp <- apply(p,1,sum) > 0; temp <- c(temp,temp,T,temp); return(temp)}))
pars1930  <- res1930[,-8] * ischange
report(pars1930)
dlvPath
source('~/twostateMD/dlvPath.R')
res1930  <- get(load("../twostateMD/results/d_1930_resALL.rda"))
res1930  <- totable(res1930)
res1930  <- res1930[,-8]
pdat1930 <- gen_pdat(1930)
pathss_1930  <- lapply(1:nrow(res1930), function(x) {cat(x,"\n");dlvPath(res1930[x,1:7],pdats[[1]][,x])})
ischange  <- t(sapply(pathss_1930, function(p) {temp <- apply(p,1,sum) > 0; temp <- c(temp,temp,T,temp); return(temp)}))
pars1930  <- res1930[,-8] * ischange
report(pars1930)
setwd("~/MSReplication/")
source("convDLV_d.R")
source("convDLV_dm.R")
source("plotAll.R")
source("plotRejs.R")
q()
